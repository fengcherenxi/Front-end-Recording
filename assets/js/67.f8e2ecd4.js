(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{649:function(t,s,a){"use strict";a.r(s);var n=a(17),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"拉开序幕的setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拉开序幕的setup"}},[t._v("#")]),t._v(" 拉开序幕的setup")]),t._v(" "),a("ul",[a("li",[t._v("理解：Vue3.0中的一个新的配置项，值为一个函数")]),t._v(" "),a("li",[t._v("setup是所有Composition API（组合API）“表演的舞台”")]),t._v(" "),a("li",[t._v("组件中所用的：数据、方法等等，都要配置在setup中")]),t._v(" "),a("li",[t._v("setup函数的两种返回值：\n"),a("ul",[a("li",[t._v("若返回一个对象，则对象中的属性、方法，在模板中均可以直接使用。（重点关注！）")]),t._v(" "),a("li",[t._v("若返回一个渲染函数：则可以自定义渲染内容。（了解）")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回一个对象的形式（常用）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'张三'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" age "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayHello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'我叫张三，今年18岁了'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        sayHello\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回一个函数（渲染函数）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 需要引用一下：import {h} from 'vue'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'h1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'啦啦啦'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 简写：")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'h1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'啦啦啦'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意：要实现响应式需要配合ref函数使用")]),t._v("\n")])])]),a("ul",[a("li",[t._v("注意点：\n"),a("ul",[a("li",[t._v("尽量不要与vue2.x配置混合使用\n"),a("ul",[a("li",[t._v("vue2.x配置（data，methods，computed...）中可以访问到setup中的属性、方法。")]),t._v(" "),a("li",[t._v("但在setup中不能访问到vue2.x配置（data，methods，computed...）。")]),t._v(" "),a("li",[t._v("若有重名，setup优先")])])]),t._v(" "),a("li",[t._v("setup不能是一个async函数，因为返回值不再是return的对象，而是promise，模板看不到return对象中的属性")])])])]),t._v(" "),a("h3",{attrs:{id:"ref函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ref函数"}},[t._v("#")]),t._v(" ref函数")]),t._v(" "),a("ul",[a("li",[t._v("vue2的ref类似于id选择器，给标签打标识")]),t._v(" "),a("li",[t._v("vue3的ref函数定义响应式数据\n"),a("ul",[a("li",[t._v("JS中操作数据：xxx.value")]),t._v(" "),a("li",[t._v("模板中读取数据：不需要.value，直接："),a("code",[t._v("<div>"+t._s(t.xxx)+"</div>")])])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ref"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'张三'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" age "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ref加工后的数据变成可一个对象——引用实现的实例对象")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("changInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'李四'")]),t._v("\n        age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        changInfo\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("响应式，接受数据可以是基本类型也可以是对象类型：\n"),a("ul",[a("li",[t._v("ref加工后的数据变成可一个对象RefImpl——引用实现的实例对象，基本类型数据使用"),a("code",[t._v("Object.defineProperty()")]),t._v("的"),a("code",[t._v("get")]),t._v("、"),a("code",[t._v("set")]),t._v("实现响应式")]),t._v(" "),a("li",[t._v("对象类型实现响应式——ES6的Proxy，求助了vue3.0中的一个新函数"),a("code",[t._v("reactive")]),t._v("，要拿到需要object.value来实现")])])])]),t._v(" "),a("h3",{attrs:{id:"reactive函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reactive函数"}},[t._v("#")]),t._v(" reactive函数")]),t._v(" "),a("ul",[a("li",[t._v("作用：定义一个"),a("strong",[t._v("对象类型")]),t._v("的响应式数据（基本类型别用他，用"),a("code",[t._v("ref")]),t._v("函数）")]),t._v(" "),a("li",[t._v("语法："),a("code",[t._v("const 代理对象 = reactive(被代理对象)")]),t._v("接收一个对象（或数组），返回一个代理器对象（Proxy对象的实例对象，简称proxy对象）")]),t._v(" "),a("li",[t._v("reactive定义的响应式数据是“深层次的”")]),t._v(" "),a("li",[t._v("内部基于ES6的Proxy实现，通过代理对象操作源对象内部数据都是响应式的")]),t._v(" "),a("li",[t._v("使用"),a("code",[t._v("reactive")]),t._v("实现响应式比"),a("code",[t._v("ref")]),t._v("更香，面向对象编程且代码更语义化")])]),t._v(" "),a("h3",{attrs:{id:"setup的两个注意点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setup的两个注意点"}},[t._v("#")]),t._v(" setup的两个注意点")]),t._v(" "),a("ul",[a("li",[t._v("setup执行的时机\n"),a("ul",[a("li",[t._v("在beforeCreate之前执行一次，this是undefined")])])]),t._v(" "),a("li",[t._v("setup的参数\n"),a("ul",[a("li",[t._v("props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性")]),t._v(" "),a("li",[t._v("context：上下文对象\n"),a("ul",[a("li",[t._v("attrs：值为对象，包含：组件外部传递过来，但没有在props配置中生命的属性，相当于"),a("code",[t._v("this.$attrs")])]),t._v(" "),a("li",[t._v("slots：收到的插槽内容，相当于"),a("code",[t._v("this.$slots")])]),t._v(" "),a("li",[t._v("emit：分发自定义事件的函数，相当于"),a("code",[t._v("this.$emit")])])])])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);