(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{623:function(t,a,s){"use strict";s.r(a);var n=s(17),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("小实践：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://yangsuoze.cn/Canvas_study/Canvas_stars/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("canvas星空特效"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://yangsuoze.cn/Canvas_study/Canvas_trees/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("canvas梦幻大树特效"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"_1-作为新增属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-作为新增属性"}},[t._v("#")]),t._v(" 1. 作为新增属性")]),t._v(" "),s("ul",[s("li",[t._v("画布（canvas ）： canvas 元素使用 JavaScript 在网页上绘制图像。画布是一个矩形区域，可以控制其每一像素。canvas 拥有多种绘制路径、矩形、圆形、字符以及添加图像的方法。")])]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("canvas")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("myCanvas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("200"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("100"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("canvas")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("ul",[s("li",[t._v("SVG：SVG 指可伸缩矢量图形，用于定义用于网络的基于矢量的图形，使用 XML 格式定义图形，图像在放大或改变尺寸的情况下其图形质量不会有损失，它是万维网联盟的标准")]),t._v(" "),s("li",[t._v("地理定位：Geolocation（地理定位）用于定位用户的位置。‘")])]),t._v(" "),s("h2",{attrs:{id:"_2-canvas-和-svg-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-canvas-和-svg-的区别"}},[t._v("#")]),t._v(" 2. Canvas 和 SVG 的区别")]),t._v(" "),s("p",[s("strong",[t._v("（1）SVG：")])]),t._v(" "),s("p",[t._v("SVG 可缩放矢量图形（Scalable Vector Graphics）是基于可扩展标记语言 XML 描述的 2D 图形的语言，SVG 基于 XML 就意味着 SVG DOM 中的每个元素都是可用的，可以为某个元素附加 JavaScript 事件处理器。在 SVG 中，每个被绘制的图形均被视为对象。如果 SVG 对象的属性发生变化，那么浏览器能够自动重现图形。")]),t._v(" "),s("p",[t._v("其特点如下：")]),t._v(" "),s("ul",[s("li",[t._v("不依赖分辨率")]),t._v(" "),s("li",[t._v("支持事件处理器")]),t._v(" "),s("li",[t._v("最适合带有大型渲染区域的应用程序（比如谷歌地图）")]),t._v(" "),s("li",[t._v("复杂度高会减慢渲染速度（任何过度使用 DOM 的应用都不快）")]),t._v(" "),s("li",[t._v("不适合游戏应用")])]),t._v(" "),s("p",[s("strong",[t._v("（2）Canvas：")])]),t._v(" "),s("p",[t._v("Canvas 是画布，通过 JavaScript 来绘制 2D 图形，是逐像素进行渲染的。其位置发生改变，就会重新进行绘制。")]),t._v(" "),s("p",[t._v("其特点如下：")]),t._v(" "),s("ul",[s("li",[t._v("依赖分辨率")]),t._v(" "),s("li",[t._v("不支持事件处理器")]),t._v(" "),s("li",[t._v("弱的文本渲染能力")]),t._v(" "),s("li",[t._v("能够以 .png 或 .jpg 格式保存结果图像")]),t._v(" "),s("li",[t._v("最适合图像密集型的游戏，其中的许多对象会被频繁重绘")])]),t._v(" "),s("p",[t._v("注：矢量图，也称为面向对象的图像或绘图图像，在数学上定义为一系列由线连接的点。矢量文件中的图形元素称为对象。每个对象都是一个自成一体的实体，它具有颜色、形状、轮廓、大小和屏幕位置等属性。")]),t._v(" "),s("h2",{attrs:{id:"_3-对-requestanimationframe-的理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-对-requestanimationframe-的理解"}},[t._v("#")]),t._v(" 3. 对 requestAnimationframe 的理解")]),t._v(" "),s("p",[t._v("实现动画效果的方法比较多，Javascript 中可以通过定时器 setTimeout 来实现，CSS3 中可以使用 transition 和 animation 来实现，HTML5 中的 canvas 也可以实现。除此之外，HTML5 提供一个专门用于请求动画的 API，那就是 requestAnimationFrame，顾名思义就是"),s("strong",[t._v("请求动画帧")]),t._v("。")]),t._v(" "),s("p",[t._v("MDN 对该方法的描述：")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("window.requestAnimationFrame()")]),t._v(" 告诉浏览器——你希望执行一个动画，并且要求浏览器在下次重绘之前调用指定的回调函数更新动画。该方法需要传入一个回调函数作为参数，该回调函数会在浏览器下一次重绘之前执行。")])]),t._v(" "),s("p",[s("strong",[t._v("语法：")]),t._v(" "),s("code",[t._v("window.requestAnimationFrame(callback);")]),t._v(" 其中，callback 是"),s("strong",[t._v("下一次重绘之前更新动画帧所调用的函数")]),t._v("(即上面所说的回调函数)。该回调函数会被传入 DOMHighResTimeStamp 参数，它表示 requestAnimationFrame() 开始去执行回调函数的时刻。该方法属于"),s("strong",[t._v("宏任务")]),t._v("，所以会在执行完微任务之后再去执行。")]),t._v(" "),s("p",[t._v("**取消动画：**使用 cancelAnimationFrame()来取消执行动画，该方法接收一个参数——requestAnimationFrame 默认返回的 id，只需要传入这个 id 就可以取消动画了。")]),t._v(" "),s("p",[s("strong",[t._v("优势：")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("CPU 节能")]),t._v("：使用 SetTinterval 实现的动画，当页面被隐藏或最小化时，SetTinterval 仍然在后台执行动画任务，由于此时页面处于不可见或不可用状态，刷新动画是没有意义的，完全是浪费 CPU 资源。而 RequestAnimationFrame 则完全不同，当页面处理未激活的状态下，该页面的屏幕刷新任务也会被系统暂停，因此跟着系统走的 RequestAnimationFrame 也会停止渲染，当页面被激活时，动画就从上次停留的地方继续执行，有效节省了 CPU 开销。")]),t._v(" "),s("li",[s("strong",[t._v("函数节流")]),t._v("：在高频率事件( resize, scroll 等)中，为了防止在一个刷新间隔内发生多次函数执行，RequestAnimationFrame 可保证每个刷新间隔内，函数只被执行一次，这样既能保证流畅性，也能更好的节省函数执行的开销，一个刷新间隔内函数执行多次时没有意义的，因为多数显示器每 16.7ms 刷新一次，多次绘制并不会在屏幕上体现出来。")]),t._v(" "),s("li",[s("strong",[t._v("减少 DOM 操作")]),t._v("：requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，一般来说，这个频率为每秒 60 帧。")])]),t._v(" "),s("p",[s("strong",[t._v("setTimeout 执行动画的缺点")]),t._v("：它通过设定间隔时间来不断改变图像位置，达到动画效果。但是容易出现卡顿、抖动的现象；原因是：")]),t._v(" "),s("ul",[s("li",[t._v("settimeout 任务被放入异步队列，只有当主线程任务执行完后才会执行队列中的任务，因此实际执行时间总是比设定时间要晚；")]),t._v(" "),s("li",[t._v("settimeout 的固定时间间隔不一定与屏幕刷新间隔时间相同，会引起丢帧。")])])])}),[],!1,null,null,null);a.default=e.exports}}]);